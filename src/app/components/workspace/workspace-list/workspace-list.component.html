<div *ngIf="loading; else content">
  <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</div>

<ng-template #content>
  <mat-sidenav-container>
    <mat-sidenav mode="side" opened>
      <mat-form-field appearance="fill" *ngIf="router.url === '/workspaces'">
        <mat-label>Search</mat-label>
        <input matInput (keyup)="applyFilter($event)" />
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
      <mat-nav-list>
        <a mat-list-item [routerLink]="'/workspaces'"
          ><div class="v-centered">
            <mat-icon>folder_open</mat-icon> Browse
          </div></a
        >
        <a mat-list-item [routerLink]="'/create-account'"
          ><div class="v-centered">
            <mat-icon>create_new_folder</mat-icon> Add workspace
          </div>
        </a>
        <a mat-list-item [routerLink]="'/contacts'"
          ><div class="v-centered"><mat-icon>settings</mat-icon> Configure</div>
        </a>
      </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content>
      <div class="mat-table">
        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          matSortActive="name"
          matSortDirection="asc"
          matSortDisableClear
        >
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
          </ng-container>

          <ng-container matColumnDef="lastModified">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Updated</th>
            <td mat-cell *matCellDef="let element">
              {{ getDateFromTimestamp(element.lastModified) }}
            </td>
          </ng-container>

          <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
          ></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
      <mat-paginator
        [pageSize]="10"
        [pageSizeOptions]="[5, 10, 20, 50]"
      ></mat-paginator>
    </mat-sidenav-content>
  </mat-sidenav-container>
</ng-template>
